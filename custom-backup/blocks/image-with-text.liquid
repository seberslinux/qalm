{% comment %}
  Image with text block - Reusable image and text component
{% endcomment %}

{%- liquid
  assign image_position = block.settings.image_position | default: 'left'
  assign text_alignment = block.settings.text_alignment | default: 'left'
  assign image_width = block.settings.image_width | default: '50'
-%}

<div class="image-with-text-block flex flex-col {% if image_position == 'right' %}lg:flex-row-reverse{% else %}lg:flex-row{% endif %} items-center gap-8">
  <div class="image-container" style="width: {{ image_width }}%;">
    {% if block.settings.image != blank %}
      <img 
        src="{{ block.settings.image | image_url: width: 600 }}" 
        alt="{{ block.settings.image.alt | default: block.settings.heading }}"
        class="w-full h-auto"
        loading="lazy"
      >
    {% else %}
      <div class="w-full h-64 bg-gray-200 flex items-center justify-center">
        <span class="text-gray-400">No image</span>
      </div>
    {% endif %}
  </div>
  
  <div class="text-container flex-1 text-{{ text_alignment }}">
    {% if block.settings.heading != blank %}
      <h3 class="text-2xl font-light mb-4">{{ block.settings.heading }}</h3>
    {% endif %}
    
    {% if block.settings.text != blank %}
      <div class="text-gray-600 mb-6">
        {{ block.settings.text }}
      </div>
    {% endif %}
    
    {% if block.settings.button_text != blank and block.settings.button_url != blank %}
      <a 
        href="{{ block.settings.button_url }}" 
        class="inline-block bg-black text-white px-6 py-3 text-sm uppercase tracking-wider hover:bg-gray-800 transition-colors"
      >
        {{ block.settings.button_text }}
      </a>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Image with text",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "image_width",
      "label": "Image width",
      "min": 30,
      "max": 70,
      "step": 5,
      "unit": "%",
      "default": 50
    }
  ]
}
{% endschema %}
